# Dragon Movie Project

## Required software

- Java 11
- Maven

## Optional configuration

If desired, you can change default port value in application.properties

## To build and run the application locally

1. Build the jar: `mvn clean package`
1. Run the jar: `java -jar ./target/dragon-movie-1.0.0.jar`

## Using the API

### Swagger

This server was generated by the [swagger-codegen](https://github.com/swagger-api/swagger-codegen) project with the command
`swagger-codegen generate -i YOUR_FILE.yaml -l spring`, where YOUR_FILE is a resolved yaml file.

The underlying library integrating swagger to SpringBoot is [springdoc-openapi](https://github.com/springdoc/springdoc-openapi)

### Documentation

You can view the API documentation in swagger-ui at http://localhost:8080/apis/MORGANMAZER/dragon/1.0/swagger-ui/

## Persistence

This application utilizes an H2 in-memory database. When the application is shut down, the database does not persist.

## Development

### If you need to modify the API

I'm not sure if this is the best way, but it's how I did it when I needed to update a few endpoint definitions:

1. Ensure all your local changes are committed
1. Copy the YAML found in src/main/resources to the Swagger editor in your browser
1. Create a new API version. Make changes and verify the file is valid.
1. Export the file as resolved YAML
1. Outside of the git repo (otherwise it will overwrite all the generated files!), regenerate the API interfaces: `swagger-codegen generate -i YOUR_FILE.yaml -l spring`
1. Copy the files you know were updated into your IDE (*Api interface(s) and *ApiController implementation(s) you changed)
1. Make sure the project still builds and runs and that the API definition looks correct in Swagger
1. Copy the YAML file into src/main/resources so that the rest of the team can view the changes and build on them if necessary
1. Commit the changes
